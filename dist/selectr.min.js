(function(){!function(a,b){var c;return c=function(){function c(b,c){var d,e,f,g,h;for(this.el=b,this.args=c,this.$el=a(b),this.args=a.extend({},this.defaults,this.args,this.$el.data("selectr-opts")),this.$el.data("selectr-opts",this.args),this.container=this.CreateContainer(),this.opts=this.PrepareOpts(a("option",this.el)),a(".list-group",this.container).append(this.opts),e=0,h=this.opts,f=0,g=h.length;g>f;f++)d=h[f],d.hasClass("selected")&&e++;a(".current-selection",this.container).text(e>0?e:void 0),0!==e||this.args.alwaysShowFooter||a(".panel-footer",this.container).addClass("hidden"),this.MonitorSource(),this.container.insertAfter(this.el),this.$el.hide()}return c.prototype.defaults={Selectr:c,title:"Select Options",noMatchingOptionsText:"No options found",placeholder:"Search",resetText:"Clear All",width:"300px",maxListHeight:"250px",tooltipBreakpoint:25,maxSelection:1/0,panelStyle:"default",alwaysShowFooter:!1},c.prototype.CreateContainer=function(){return a(document.createElement("div")).attr({"class":"selectr panel panel-"+this.args.panelStyle+" "+(this.$el.prop("multiple")?"multi":void 0),style:"width: "+this.args.width+";"}).html("<div class='panel-heading "+(""===this.args.title?"no-title":void 0)+"'>\n  <h4 class='panel-title'>\n    "+this.args.title+"\n  </h4>\n</div>\n<div class='panel-body'>\n  <input class='form-control' placeholder='"+this.args.placeholder+"'>\n  <span class='clear-search hidden'>&times;</span>\n</div>\n<ul class='list-group' style='max-height: "+this.args.maxListHeight+"'>\n</ul>\n<div class='no-matching-options hidden'>\n  <strong>"+this.args.noMatchingOptionsText+"</strong>\n</div>\n<div class='panel-footer "+(this.$el.prop("multiple")?void 0:"hidden")+"'>\n  <button class='reset btn btn-sm btn-default'>\n    "+this.args.resetText+"\n  </button>\n  "+(this.$el.prop("multiple")?"<span class='current-selection badge'></span>":void 0)+"\n</div>")},c.prototype.PrepareOpts=function(b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a(document.createElement("li")).attr({"class":"list-group-item "+(c.selected?"selected":"")}).data("val",a(c).val()).append(a(document.createElement("div")).attr({"class":"color-code "+(a(c).data("selectr-color")?void 0:"no-color")}).css("background-color",a(c).data("selectr-color"))).append(a(document.createElement("div")).text(a(c).text()).attr({"class":"option-name",title:a(c).text().length>this.args.tooltipBreakpoint?a(c).text():void 0})).append(a(document.createElement("div")).html("&times").attr({"class":"add-remove "+(this.$el.prop("multiple")?void 0:"hidden")})));return f},c.prototype.MonitorSource=function(){var c,d;return d=this,this.sync=function(b){return function(){return b.$el.data("selectr-change-triggered")?void 0:(null!=d.prev&&clearTimeout(d.prev),d.prev=setTimeout(function(){var c,e,f,g,h;return g=b.$el.next(),h=a(document.createElement("ul")).attr({"class":"list-group",style:"max-height: "+d.args.maxListHeight+";"}),f=b.PrepareOpts(a("option",b.$el)),h.append(f),a(".list-group",g).replaceWith(h),e=a("option:selected",b.$el).length,a(".current-selection",g).text(e>0?e:""),c=a(".panel-footer",g),e>0&&a(b.$el).prop("multiple")&&!b.args.alwaysShowFooter?c.removeClass("hidden"):c.addClass("hidden")},200))}}(this),c=b.MutationObserver||b.WebKitMutationObserver||b.MozMutationObserver,this.$el.on("change",function(){return d.sync()}),null!=c?(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(function(b){return a.each(b,d.sync)}),this.propertyObserver.observe(this.$el.get(0),{attributes:!1,childList:!0})):void 0},c.TriggerChange=function(a){return a.data("selectr-change-triggered",!0),a.trigger({type:"change"}),a.data("selectr-change-triggered",!1)},c.SelectOption=function(b,c){var d,e,f,g,h,i,j;if(g=a(c).parents(".selectr"),f=a(c).parents(".selectr").prev(),!(a(f).data("selectr-opts").maxSelection<=a(c).siblings(".selected").length&&b)){if(!b)for(a("option",f).prop("selected",!1),j=a(c).siblings(),h=0,i=j.length;i>h;h++)e=j[h],a(e).removeClass("selected");return a(c).addClass("selected"),a("option[value="+a(c).data("val")+"]",f).prop("selected",!0),d=a("option:selected",f).length,a(".current-selection",g).text(d>0?d:""),f.prop("multiple")&&!a(f).data("selectr-opts").alwaysShowFooter&&a(".panel-footer",g).removeClass("hidden"),d===a(f).data("selectr-opts").maxSelection?g.addClass("max-selection-reached"):g.removeClass("max-selection-reached"),this.TriggerChange(f)}},c.DeselectOption=function(b){var c,d;return d=a(b).parents(".selectr").prev(),a(b).parents(".selectr").removeClass("max-selection-reached"),a(b).removeClass("selected"),a("option[value="+a(b).data("val")+"]",d).prop("selected",!1),c=a("option:selected",d).length,a(".current-selection",a(b).parents(".selectr")).text(c>0?c:""),0!==c||a(d).data("selectr-opts").alwaysShowFooter||a(".panel-footer",a(b).parents(".selectr")).addClass("hidden"),this.TriggerChange(d)},c.bindingsInitialized=!1,c.InstallBindings=function(){return c.bindingsInitialized?void 0:(a(document).on("click",".selectr .list-group-item",function(b){var d,e;if(!b.originalEvent.detail||2!==b.originalEvent.detail)return e=a(this).parents(".selectr").prev(),d=(b.ctrlKey||b.metaKey)&&e.prop("multiple"),a(this).hasClass("selected")&&(d||0===a(this).siblings(".selected").length)&&e.prop("multiple")?c.DeselectOption(this):c.SelectOption(d,this),b.stopPropagation(),b.preventDefault(),a(document).on("keydown",function(b){return b.ctrlKey?a(".selectr .list-group").addClass("ctrl-key"):void 0}),a(document).on("keyup",function(b){return b.ctrlKey?void 0:a(".selectr .list-group").removeClass("ctrl-key")})}),a(document).on("click",".selectr .add-remove",function(b){var d;if(!b.originalEvent.detail||2!==b.originalEvent.detail)return d=a(b.target).parents(".selectr .list-group-item"),d.hasClass("selected")?c.DeselectOption(d):c.SelectOption(!0,d),b.stopPropagation(),b.preventDefault()}),a(document).on("click change keyup",".selectr .form-control",function(b){var c,d,e,f,g;return g=a(this).parents(".selectr"),e=new RegExp(a(this).val().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"i"),f=!0,a(".list-group-item",g).each(function(b,c){a(c).text().match(e)?(a(c).removeClass("hidden"),f=!1):a(c).addClass("hidden")}),c=a(".clear-search",g),a(this).val().length>0?c.removeClass("hidden"):c.addClass("hidden"),d=a(".no-matching-options",g),f?d.removeClass("hidden"):d.addClass("hidden"),b.stopPropagation(),b.preventDefault()}),a(document).on("click",".selectr .clear-search",function(b){return a(this).siblings("input").val("").click(),b.stopPropagation(),b.preventDefault()}),a(document).on("click",".selectr .reset",function(b){var d,e;return e=a(this).parents(".selectr"),d=e.prev(),e.find("ul > li").removeClass("selected"),a("option",d).prop("selected",!1),c.TriggerChange(d),a(".current-selection",e).text(""),a(d).data("selectr-opts").alwaysShowFooter||a(".panel-footer",e).addClass("hidden"),b.stopPropagation(),b.preventDefault()}),c.bindingsInitialized=!0)},c}(),a.fn.extend({selectr:function(b){return this.each(function(){var d,e;return d=a(this),e=d.data("selectr"),e?void 0:d.data("selectr",e=new c(this,b))}),c.InstallBindings()}})}($,window)}).call(this);